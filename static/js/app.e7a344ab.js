(function(e){function t(t){for(var a,r,o=t[0],c=t[1],u=t[2],p=0,d=[];p<o.length;p++)r=o[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},i={app:0},s=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},3:function(e,t){},"30ed":function(e,t,n){e.exports=n.p+"static/img/ether.96092754.webp"},"3de3":function(e,t,n){e.exports=n.p+"static/img/moonbox_as_gift.d4dc2f7f.svg"},4:function(e,t){},4421:function(e,t,n){e.exports=n.p+"static/img/make_a_moonbox.93ac83fd.svg"},4719:function(e,t){e.exports={language:"语言",english:"English",chinese:"中文",introduce1:"如果你担心hold不住手里的ETH，把他存入月光宝盒吧！",introduce2:"设定目标价格和截止时间，满足任一条件，",introduce3:"就能开启宝盒，取回ETH。",MoonBox:"月光宝盒",hodl:"Hold住你的ETH直到涨破天",price:"当前ETH价格",start:"创建",cancel:"取消",mybox:"我的宝盒",ethamount:"ETH数量",openCondition:"开启条件",openPrice:"ETH价格 ",boxState:"状态",state1:"不能开启",state2:"已于",state3:"开启",state4:"已开启（通过Metamask登录可以看到开启时间）",pleaseMeta:"ImToken无法使用探宝功能，建议使用chrome和Metamask",open:"打开",destory:"销毁",or:"或者时间 ≥ ",unmet:"未满足",creatBox:"创建月光宝盒",newDesc:"请写下对未来的期望：",wishPrice:"期望的价格(单位$)",endTime:"选择截止时间(到时间无论价格多少都可开启箱子)",inputNum:"存入ETH数量",transferTitle:"转送月光宝盒",transferAddr:"发送地址",transfer:"发送",pleaseLogin:"请先登录以太坊钱包",unlink:"钱包未连接",notEnough:"钱包余额不足",transTx:"交易正在上链",explain:{1:"你为什么需要月光宝盒",2:"它可以帮你拿住ETH，比如设定目标价$1000,那么当月光宝盒合约读取到Uniswap合约的ETH_USDC交易价格 > $1000，你才能打开盒子取回ETH！",3:"常言道，守币难如守寡。比如我本来想要涨到$200再卖，后来跌到120赶紧割肉，结果刚卖就涨了…(艹皿艹)<br />现在存到月光宝盒里，再也不用担心管不住自己的手了~",4:"只能存进去不动？",5:'当然不是，每个月光宝盒都是标准的<b class="has-text-success" >ERC-721代币</b>。你可以写一段情话当做礼物送给妹子，或者作为传家宝？随便你~',6:"未来，月光宝盒还能作为抵押物用于借贷，DeFi的潜力是无穷的！",7:"怎么确保ETH价格是真实的？",8:"创建月光宝盒时可以设置一个最长期限，超过这个时间时，即使价格没到也能开启月光宝盒，取回ETH。",9:'宝盒合约读取的ETH价格来自于<a class="has-text-warning" href="https://etherscan.io/address/0x97deC872013f6B5fB443861090ad931542878126" target="_blank" >Uniswap合约</a>，是目前以太坊网络唯一可信的去中心化预言机。如果未来该合约地址被uniswap官方更换,开发者可以同步修改到新的预言机地址。',10:"绝对安全吗？",11:"月光宝盒合约",12:"开源，符合标准ERC-721规范，任何人都可检查。开发者没有任何转账权限，只能维护价格预言机地址(无风险）。",16:"修改预言机地址1周才生效，用户可以查看新的预言机地址，生效前可以选择调用“quit”接口，安全取回ETH。",13:"费用",14:"创建和销毁月光宝盒，除了以太坊网络的gas费外，没有任何额外费用！真是100%的良心项目~",15:"如果你取回ETH后还想保留这个月光宝盒作为纪念，可以选择“打开”而不是“销毁”，这样收回ETH后宝盒ERC-721还属于你，只需要给开发者0.1%的小费~"},congratulation1:"恭喜你！终于等到了理想的价格，TO DA MOON!",congratulation2:"恭喜你！终于等到了解锁时间",taobao:"探宝",find:{1:"这个宝盒里有",2:"个ETH, 由",3:"埋藏于",4:",当ETH价格 ≥ $",5:" 才会被打开。上面写着一段话："},findTitle:"看看有什么好东西",imgfrom:"图片修改自rocket.chat"}},"47f4":function(e,t,n){e.exports=n.p+"static/img/ether_green.86c6ed0a.svg"},"4e39":function(e,t,n){e.exports=n.p+"static/img/moonbox.3097b902.svg"},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"todamoon",attrs:{title:e.$t("imgfrom")}}),a("div",{staticClass:"moon",attrs:{title:e.$t("imgfrom")}},[a("div",{staticClass:"price  has-text-white has-text-centered"},[a("img",{attrs:{src:n("30ed"),alt:""}}),a("p",{staticClass:"is-size-4-tablet is-size-6-mobile"},[e._v("\n        "+e._s(e.$t("price"))+": $"+e._s(e.coinbase?e.ethPrice:"???")+"\n      ")])])]),a("div",{staticClass:"content"},[a("div",{staticClass:"nav"},[a("nav",{staticClass:"navbar is-transparent",attrs:{role:"navigation","aria-label":"main navigation"}},[a("div",{staticClass:"navbar-brand"},[a("a",{staticClass:"navbar-burger burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},on:{click:function(t){e.isActive=!e.isActive}}},[a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"navbar-menu",class:{"is-active":e.isActive}},[a("div",{staticClass:"navbar-start"},[a("div",{staticClass:"navbar-item has-text-white-tablet",staticStyle:{cursor:"pointer"},attrs:{alt:e.coinbase},on:{click:e.pollWallet}},[a("span",{class:e.coinbase?"linked":"unlink"}),a("b-tooltip",{attrs:{label:e.coinbase?e.coinbase:"",type:"is-light",position:"is-bottom"}},[e._v("\n                "+e._s(e.coinbase?e.shortName(e.coinbase):e.$t("unlink"))+"\n              ")])],1),a("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[a("a",{staticClass:"navbar-link has-text-white-tablet"},[e._v("\n                "+e._s(e.$t("language"))+"\n              ")]),a("div",{staticClass:"navbar-dropdown"},[a("a",{staticClass:"navbar-item",on:{click:function(t){return e.setLanguage("en")}}},[e._v("\n                  "+e._s(e.$t("english"))+"\n                ")]),a("hr",{staticClass:"navbar-divider"}),a("a",{staticClass:"navbar-item",on:{click:function(t){return e.setLanguage("zhCHT")}}},[e._v("\n                  "+e._s(e.$t("chinese"))+"\n                ")])])])]),a("div",{staticClass:"navbar-end"},[a("a",{staticClass:"navbar-item has-text-white-tablet",on:{click:e.showOrb}},[e._v("\n              "+e._s(e.$t("taobao"))+"\n            ")])])])])]),a("div",{staticClass:"container"},[a("div",{staticClass:"space--4"}),a("section",{staticClass:"section head-label"},[a("div",{staticClass:"container has-text-centered "},[a("p",{staticClass:"is-size-2-tablet is-size-3-mobile has-text-white",staticStyle:{"margin-bottom":"0px"}},[e._v("\n            "+e._s(e.$t("MoonBox"))+"\n          ")]),a("p",{staticClass:"is-size-3-tablet is-size-5-mobile has-text-white",staticStyle:{"margin-bottom":"20px"}},[e._v("\n            "+e._s(e.$t("hodl"))+"\n          ")]),a("p",{staticClass:"is-size-6-tablet is-size-6-mobile has-text-gray"},[e._v("\n            "+e._s(e.$t("introduce1"))+"\n          ")]),a("p",{staticClass:"is-size-6-tablet is-size-6-mobile has-text-gray"},[e._v("\n            "+e._s(e.$t("introduce2"))+"\n          ")]),a("p",{staticClass:"is-size-6-tablet is-size-6-mobile has-text-gray"},[e._v("\n            "+e._s(e.$t("introduce3"))+"\n          ")]),a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-4-desktop is-0-mobile"}),a("div",{staticClass:"column is-4-desktop is-12-mobile"},[a("button",{staticClass:"button is-info is-large",staticStyle:{width:"100%","margin-top":"20px"},attrs:{disabled:e.loading},on:{click:e.checkLogin}},[e._v("\n                "+e._s(e.tx?e.$t("transTx"):e.$t("start"))+"\n              ")])])])])]),a("section",{staticClass:"section"},[a("p",{directives:[{name:"show",rawName:"v-show",value:e.myBoxs.length>0,expression:"myBoxs.length > 0"}],staticClass:"is-size-3-tablet is-size-3-mobile has-text-white has-text-centered"},[e._v("\n          "+e._s(e.$t("mybox"))+"\n        ")]),e._l(Math.ceil(e.myBoxs.length/3),(function(t,n){return a("div",{key:n,staticClass:"columns"},e._l(e.showBoxs(n),(function(t){return a("div",{key:t.id,staticClass:"column is-4-tablet is-full-mobile"},[a("div",{staticClass:"card box-style",style:{"border-color":e.borderColor(t.etherNumber)}},[a("div",{staticClass:"card-image"},[a("p",{staticClass:"has-text-centered namefont has-text-grey is-size-4-tablet no-margin"},[e._v("\n                  "+e._s(t.name)+"\n                ")]),a("figure",{staticClass:"image is-16by9"},[a("span",{staticClass:"icon has-text-primary has-text-info transferIcon",staticStyle:{cursor:"pointer"},on:{click:function(n){return e.showTrans(t.id)}}},[a("i",{staticClass:"mdi mdi-send mdi-24px"})]),a("img",{staticStyle:{"max-height":"10em"},attrs:{src:e.level(t.etherNumber),alt:"ETHER"}})])]),a("div",{staticClass:"card-content"},[a("p",{staticClass:"has-text-centered is-size-3-tablet is-size-3-mobile eth-number"},[e._v("\n                  "+e._s(t.etherNumber)+" ETH\n                ")]),a("div",{staticClass:"column"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.etherNumber>0,expression:"i.etherNumber > 0"}]},[a("div",{staticClass:"has-text-grey-light has-text-centered",staticStyle:{"margin-right":"10px"},domProps:{innerHTML:e._s(e.$t("openCondition"))}}),a("div",[a("p",{staticClass:"has-text-centered"},[a("span",[e._v(e._s(e.$t("openPrice")))]),a("span",[e._v("≥ $"+e._s(t.openPrice)),a("span",{directives:[{name:"show",rawName:"v-show",value:t.openPrice>e.ethPrice,expression:"i.openPrice > ethPrice"}],staticClass:"has-text-danger"},[e._v("("+e._s(e.$t("unmet"))+")")])]),a("br"),a("span",[e._v(e._s(e.$t("or")+e.showTime(t.openTime)))])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.ethPrice>t.openPrice||(new Date).getTime()>t.openTime.getTime(),expression:"\n                        ethPrice > i.openPrice ||\n                          new Date().getTime() > i.openTime.getTime()\n                      "}],staticStyle:{"margin-top":"10px"}},[a("button",{staticClass:"button is-info is-medium",attrs:{disabled:e.loading},on:{click:function(n){return e.openBox(t.id)}}},[e._v("\n                        "+e._s(e.$t("open"))+"\n                      ")]),a("button",{staticClass:"button is-warning is-medium is-float-right",staticStyle:{"margin-left":"10px"},attrs:{disabled:e.loading},on:{click:function(n){return e.breakBox(t.id)}}},[e._v("\n                        "+e._s(e.$t("destory"))+"\n                      ")])])]),a("p",{directives:[{name:"show",rawName:"v-show",value:0==t.etherNumber,expression:"i.etherNumber == 0"}],staticClass:"has-text-centered"},[e._v("\n                    "+e._s(e.isImtoken?e.$t("state4"):e.$t("state2")+t.opendTime+e.$t("state3"))+"\n                  ")])])])])])})),0)}))],2),a("section",{staticClass:"section"},[a("div",{staticClass:"container"},[a("div",{staticClass:"columns has-text-around reverse"},[a("div",{staticClass:"column is-5"},[a("p",{staticClass:"is-size-5 has-text-white"},[e._v(e._s(e.$t("explain.1")))]),a("p",{staticClass:"has-text-gray"},[e._v("\n                "+e._s(e.$t("explain.2"))+"\n              ")]),a("p",{staticClass:"has-text-gray",domProps:{innerHTML:e._s(e.$t("explain.3"))}})]),e._m(0)]),a("div",{staticClass:"space--4"}),a("div",{staticClass:"columns has-text-around"},[a("div",{staticClass:"column is-5"},[a("p",{staticClass:"is-size-5 has-text-white"},[e._v(e._s(e.$t("explain.4")))]),a("p",{staticClass:"has-text-gray",domProps:{innerHTML:e._s(e.$t("explain.5"))}}),a("p",{staticClass:"has-text-gray"},[e._v("\n                "+e._s(e.$t("explain.6"))+"\n              ")])]),e._m(1)]),a("div",{staticClass:"space--4"}),a("div",{staticClass:"columns has-text-around reverse"},[a("div",{staticClass:"column is-5"},[a("p",{staticClass:"is-size-5 has-text-white"},[e._v("\n                "+e._s(e.$t("explain.7"))+"\n              ")]),a("p",{staticClass:"has-text-gray",domProps:{innerHTML:e._s(e.$t("explain.9"))}}),a("p",{staticClass:"has-text-gray",domProps:{innerHTML:e._s(e.$t("explain.8"))}})]),e._m(2)]),a("div",{staticClass:"space--4"}),a("div",{staticClass:"columns has-text-around"},[a("div",{staticClass:"column is-5"},[a("p",{staticClass:"is-size-5 has-text-white"},[e._v(e._s(e.$t("explain.10")))]),a("p",{staticClass:"has-text-gray"},[a("a",{staticClass:"has-text-warning",attrs:{href:"https://etherscan.io/address/0x8b42772bD32Ea6782Dc89ec2488b8D27501AC84A",target:"_blank"}},[e._v(e._s(e.$t("explain.11")))]),e._v(e._s(e.$t("explain.12"))+"\n              ")]),a("p",{staticClass:"has-text-gray"},[e._v("\n                "+e._s(e.$t("explain.16"))+"\n              ")])]),e._m(3)]),a("div",{staticClass:"space--4"}),a("div",{staticClass:"columns has-text-around reverse"},[a("div",{staticClass:"column is-5"},[a("p",{staticClass:"is-size-5 has-text-white"},[e._v("\n                "+e._s(e.$t("explain.13"))+"\n              ")]),a("p",{staticClass:"has-text-gray"},[e._v("\n                "+e._s(e.$t("explain.14"))+"\n              ")]),a("p",{staticClass:"has-text-gray"},[e._v("\n                "+e._s(e.$t("explain.15"))+"\n              ")])]),e._m(4)])])])]),e._m(5)]),a("b-modal",{attrs:{active:e.showCreat},on:{"update:active":function(t){e.showCreat=t}}},[a("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v(e._s(e.$t("creatBox")))]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){e.showCreat=!1}}})]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"content"},[a("b-field",{attrs:{label:e.$t("newDesc")}},[a("b-input",{model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1),a("b-field",{attrs:{label:e.$t("wishPrice")}},[a("b-input",{model:{value:e.wishPrice,callback:function(t){e.wishPrice=t},expression:"wishPrice"}})],1),a("b-field",{attrs:{label:e.$t("endTime")}},[a("b-datetimepicker",{attrs:{rounded:"",placeholder:"Click to select...",icon:"calendar-today",timepicker:{hourFormat:e.format}},model:{value:e.openTime,callback:function(t){e.openTime=t},expression:"openTime"}})],1),a("b-field",{attrs:{label:e.$t("inputNum")}},[a("b-input",{model:{value:e.ethNum,callback:function(t){e.ethNum=t},expression:"ethNum"}})],1)],1)]),a("footer",{staticClass:"modal-card-foot"},[a("div",{staticStyle:{width:"100%"}},[a("button",{staticClass:"button is-warning is-pulled-right",on:{click:function(t){e.showCreat=!1}}},[e._v("\n            "+e._s(e.$t("cancel"))+"\n          ")]),a("button",{staticClass:"button is-success is-pulled-right",class:{"is-loading":e.loading},staticStyle:{"margin-right":"0.5em"},attrs:{disabled:e.loading},on:{click:e.creat}},[e._v("\n            "+e._s(e.$t("start"))+"\n          ")])])])])]),a("b-modal",{attrs:{active:e.showTransfer},on:{"update:active":function(t){e.showTransfer=t}}},[a("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v(e._s(e.$t("transferTitle")))]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){e.showTransfer=!1}}})]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"content"},[a("b-field",{attrs:{label:e.$t("transferAddr")}},[a("b-input",{model:{value:e.transferAddr,callback:function(t){e.transferAddr=t},expression:"transferAddr"}})],1)],1)]),a("footer",{staticClass:"modal-card-foot"},[a("div",{staticStyle:{width:"100%"}},[a("button",{staticClass:"button is-warning is-pulled-right",on:{click:function(t){e.showTransfer=!1}}},[e._v("\n            "+e._s(e.$t("cancel"))+"\n          ")]),a("button",{staticClass:"button is-success is-pulled-right",class:{"is-loading":e.loading},staticStyle:{"margin-right":"0.5em"},attrs:{disabled:e.loading},on:{click:e.transfer}},[e._v("\n            "+e._s(e.$t("transfer"))+"\n          ")])])])])]),a("b-modal",{attrs:{active:e.showTaoBao,width:"40em"},on:{"update:active":function(t){e.showTaoBao=t}}},[a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v(e._s(e.$t("findTitle")))])]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"content ground has-text-centered"},[e.showshovel?a("img",{staticStyle:{height:"100%"},attrs:{src:n("9d31")}}):e._e(),e.showBox?a("img",{staticClass:"showBox",staticStyle:{height:"80%"},attrs:{src:n("4e39")}}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showBox,expression:"showBox"}],staticClass:"foundBox"},[a("p",[e._v("\n              "+e._s(e.isImtoken?e.$t("find.1")+e.foundBox.etherNumber+"ETH":e.$t("find.1")+e.foundBox.etherNumber+e.$t("find.2")+e.foundBox.owner+e.$t("find.3"))+"\n              "+e._s(e.isImtoken?"":e.foundBox?e.showTime(1e3*e.foundBox.creatTime):"")+"\n              "+e._s(e.$t("find.4")+e.foundBox.openPrice+e.$t("find.5"))+"\n            ")]),a("p",{staticClass:"has-test-centered namefont"},[e._v("\n              "+e._s(e.foundBox.name)+"\n            ")])])])]),a("footer",{staticClass:"modal-card-foot"},[a("div",{staticStyle:{width:"100%"}},[a("button",{staticClass:"button is-info is-large",staticStyle:{width:"100%"},on:{click:function(t){return e.find()}}},[e._v("\n            "+e._s(e.$t("taobao"))+"\n          ")])])])])])],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column is-4 has-img-center"},[a("img",{attrs:{src:n("4421"),alt:"why you need MoonBox"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column is-4 has-img-center"},[a("img",{attrs:{src:n("3de3"),alt:"why you need MoonBox"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column is-4 has-img-center"},[a("img",{attrs:{src:n("950f"),alt:"why you need MoonBox"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column is-4 has-img-center no-padding"},[n("div",{staticClass:"code"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column is-4 has-img-center"},[a("img",{attrs:{src:n("7884"),alt:"why you need MoonBox"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticStyle:{"margin-top":"5em"}},[n("div",{staticClass:"content has-text-centered"},[n("p",[n("strong",[e._v("MoonBox")]),e._v(" by\n          "),n("a",{attrs:{href:"https://twitter.com/ETHer56996938"}},[e._v("stone chen")]),e._v(". Part of\n          the images are from\n          "),n("a",{attrs:{href:"https://twitter.com/NinaLimpi"}},[e._v("Katerina Limpitsouni")]),e._v(".\n        ")])])])}],r=n("75fc"),o=(n("7f7f"),n("c5f6"),n("ac6a"),n("96cf"),n("3b8d")),c=[{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_boxId",type:"uint256"}],name:"breakBox",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"breakTime",type:"uint256"}],name:"BreakBox",type:"event"},{constant:!1,inputs:[],name:"changeEthPriceOracle",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"uint256",name:"_wishPrice",type:"uint256"},{internalType:"uint256",name:"_openTime",type:"uint256"}],name:"creatBox",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"creatTime",type:"uint256"}],name:"NewBox",type:"event"},{constant:!1,inputs:[{internalType:"uint256",name:"_boxId",type:"uint256"}],name:"openBox",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"openTime",type:"uint256"}],name:"OpenBox",type:"event"},{constant:!1,inputs:[{internalType:"uint256",name:"_boxId",type:"uint256"}],name:"quit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"boxId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"quitTime",type:"uint256"}],name:"Quit",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_newUniswapAddress",type:"address"}],name:"setNewUniswapAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"etherPriceOracle",outputs:[{internalType:"contract ETH_USDC_UNISWAP",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getEthPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"getMoonBoxsByOwner",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getMoonBoxsTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"moonBoxs",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"etherNumber",type:"uint256"},{internalType:"uint256",name:"openPrice",type:"uint256"},{internalType:"uint256",name:"openTime",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"new_uniswap_address",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"new_uniswap_address_effective_time",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"}],u=n("6314"),l=n.n(u),p=n("2f62"),d={getWeb3:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=window.ethereum?new l.a(window.ethereum):window.web3?new l.a(t.currentProvider):new l.a(new l.a.providers.HttpProvider("https://mainnet.infura.io/v3/53f4b00cf7ef44d09c9a790163e0e7dd")),n={},n.web3=t,e.next=5,t.eth.getGasPrice().then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.gasPrice=a,window.ethereum?window.ethereum.enable().then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.coinbase=a[0],n.injectedWeb3=!0,n.netId=window.ethereum.networkVersion,e.next=5,t.eth.getBalance(n.coinbase).then((function(e){n.balance=e}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):console.log("Unable to connect to Metamask");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},m="0x137d4a832c0f2aa6db24ffac82076162933e4910",h=[{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!1,name:"atk1",type:"uint256"},{indexed:!1,name:"_to",type:"address"},{indexed:!1,name:"atk2",type:"uint256"},{indexed:!1,name:"random",type:"uint256"},{indexed:!1,name:"price",type:"uint256"}],name:"kunAttackResult",type:"event"},{constant:!1,inputs:[{name:"_kunId",type:"uint256"},{name:"_targetId",type:"uint256"}],name:"attack",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_id",type:"uint256"}],name:"buyKun",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_kunId",type:"uint256"}],name:"evolve",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_kunId",type:"uint256"}],name:"feed10",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_kunId",type:"uint256"}],name:"feed100",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_kunId",type:"uint256"}],name:"feed100AndPay",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_kunId",type:"uint256"}],name:"feed50",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[],name:"getKun",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!1,name:"kunId",type:"uint256"},{indexed:!1,name:"price",type:"uint256"}],name:"KunSell",type:"event"},{constant:!1,inputs:[{name:"_kunId",type:"uint256"}],name:"repoKun",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!1,name:"quality",type:"uint256"}],name:"FirstEvolution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!1,name:"kunId",type:"uint256"},{indexed:!1,name:"newAtk",type:"uint256"},{indexed:!1,name:"oldAtk",type:"uint256"}],name:"Evolution",type:"event"},{constant:!1,inputs:[{name:"_KunId",type:"uint256"},{name:"_price",type:"uint256"}],name:"sellKun",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_fee",type:"uint256"}],name:"setTestFee",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{constant:!0,inputs:[{name:"_price",type:"uint256"}],name:"getBattleKuns",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"getKunsByOwner",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getKunsNum",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getSellKun",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getSellNum",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"kunNum",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"kuns",outputs:[{name:"price",type:"uint256"},{name:"atk",type:"uint256"},{name:"readyTime",type:"uint256"},{name:"quality",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"kunToOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"kunToSell",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"testFee",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],y=new Promise((function(e,t){var n=new l.a(window.web3.currentProvider),a=n.eth.contract(h),i=a.at(m);e(i)})),b=y;a["a"].use(p["a"]);var f=new p["a"].Store({state:{web3:{isInjected:!1,web3Instance:null,networkId:null,coinbase:null,balance:null,error:null},contractInstance:null,gasPrice:11e9},mutations:{registerWeb3Instance:function(e,t){window.console.log("registerWeb3instance",t);var n=t,a=e.web3;a.coinbase=n.coinbase,a.networkId=n.netId,a.balance=parseInt(n.balance,10),a.isInjected=n.injectedWeb3,a.web3Instance=n.web3,e.web3=a,e.gasPrice=parseInt(n.gasPrice),g()},pollWeb3Instance:function(e,t){window.console.log("pollWeb3Instance mutation being executed",t),e.web3.coinbase=t.coinbase,e.web3.balance=parseInt(t.balance,10)},registerContractInstance:function(e,t){window.console.log("Casino contract instance: ",t),e.contractInstance=function(){return t}}},actions:{registerWeb3:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,window.console.log("registerWeb3 Action being executed"),e.next=4,d.getWeb3();case 4:a=e.sent,n("registerWeb3Instance",a);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),pollWeb3:function(e,t){var n=e.commit;n("pollWeb3Instance",t)},getContractInstance:function(e){var t=e.commit;b.then((function(e){t("registerContractInstance",e)})).catch((function(e){return window.console.log(e)}))}}}),w=function(){var e=window.ethereum?new l.a(window.ethereum):window.web3?new l.a(e.currentProvider):new l.a(new l.a.providers.HttpProvider("https://mainnet.infura.io/v3/53f4b00cf7ef44d09c9a790163e0e7dd"));window.ethereum.enable().then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n[0]===f.state.web3.coinbase){t.next=6;break}return a=n[0],t.next=4,e.eth.getBalance(a).then((function(e){f.dispatch("pollWeb3",{coinbase:a,balance:parseInt(e,10)})}));case 4:t.next=8;break;case 6:return t.next=8,e.eth.getBalance(f.state.web3.coinbase).then((function(e){parseInt(e,10)!==f.state.web3.balance&&f.dispatch("pollWeb3",{coinbase:f.state.web3.coinbase,balance:parseInt(e,10)})}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},g=w,v=(n("6b54"),n("bc3a")),x=n.n(v),T={fund:"https://www"};x.a.defaults.baseURL="";var C={domainUrl:"http://localhost:8080",getLoan:function(){return x.a.get(T.loan)},gettest:function(){return x.a.post(T.test,{},{headers:{"Content-Type":"application/json;charset=utf-8"}})},showTime:function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var i=t.getDate();i=i<10?"0"+i:i;var s=t.getHours();s=s<10?"0"+s:s;var r=t.getMinutes(),o=t.getSeconds();return r=r<10?"0"+r:r,o=o<10?"0"+o:o,n+"-"+a+"-"+i+" "+s+":"+r+":"+o},sleep:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout((function(){t()}),e)}))},shortText:function(e){return e.length>10?e.slice(0,4)+"..."+e.slice(-4):e},add_comma_toThousands:function(e){var t=(e||0).toString(),n="";while(t.length>3)n=","+t.slice(-3)+n,t=t.slice(0,t.length-3);return t&&(n=t+n),n},stringToBytes:function(e){for(var t=[],n=[],a=[],i=0;i<e.length;i++){t=e.charCodeAt(i),n=[];do{n.push(255&t),t>>=8}while(t);a=a.concat(n.reverse())}return a}},_={data:function(){return{contractAddress:"0x8b42772bD32Ea6782Dc89ec2488b8D27501AC84A",loading:!1,isActive:!1,ethPrice:1e4,newName:"",wishPrice:0,openTime:new Date,ethNum:0,myBoxs:[],showCreat:!1,showTransfer:!1,showTaoBao:!1,showshovel:!1,showBox:!0,transferAddr:"",transferBoxId:0,totalBoxCount:0,foundBox:{owner:"",desc:{}},tx:"",isImtoken:!1}},computed:{web3:function(){return this.$store.state.web3},coinbase:function(){return this.$store.state.web3.coinbase},gasPrice:function(){return this.$store.state.gasPrice},format:function(){return this.formatAmPm?"12":"24"},balance:function(){return this.$store.state.web3.balance}},watch:{coinbase:function(){this.coinbase&&this.getBoxsState()}},methods:{level:function(e){return n(e<1?"cbeb":e<10?"47f4":e<100?"aee9":e<1e3?"c363":"c201")},borderColor:function(e){return e<1?"#F0F0F0":e<10?"hsl(141, 71%, 48%)":e<100?"hsl(204, 86%, 53%)":e<1e3?"#FF44FF":"#FF8000"},showOrb:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.coinbase){e.next=7;break}return this.showBox=!1,this.showTaoBao=!0,e.next=5,this.triggerContractCall("getMoonBoxsTotalSupply",[],function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.totalBoxCount=n;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:e.next=9;break;case 7:this.$buefy.toast.open({message:this.$t("pleaseLogin"),type:"is-warning"}),g();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),find:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.foundBox={},this.showBox=!1,this.showshovel=!0,t=Math.floor(Math.random()*this.totalBoxCount),e.next=6,this.getBoxDesc(t).then((function(e){n.foundBox=e,n.showshovel=!1,n.showBox=!0}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getBoxDesc:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},e.next=3,this.triggerContractCall("moonBoxs",[t],function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i.id=t,i.etherNumber=i.etherNumber/1e18,i.openTime=new Date(1e3*i.openTime),i.openPrice=i.openPrice/1e6,!a.isImtoken){e.next=9;break}n=i,a.triggerContractCall("ownerOf",[t],function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.owner=a.shortName(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=11;break;case 9:return e.next=11,a.getEvent("NewBox",i.id,function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.creatTime=s[0].returnValues.creatTime,n=i,0==i.etherNumber?(a.getEvent("OpenBox",i.id,function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.opendTime=t[0].returnValues.openTime;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.triggerContractCall("ownerOf",[t],function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.owner=a.shortName(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):(n.opendTime=0,a.triggerContractCall("ownerOf",[t],function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.owner=a.shortName(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.next=5,C.sleep(2800);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),showTrans:function(e){this.transferBoxId=e,this.showTransfer=!0},showBoxs:function(e){var t=3*e;return this.myBoxs[t+2]?[this.myBoxs[t],this.myBoxs[t+1],this.myBoxs[t+2]]:this.myBoxs[t+1]?[this.myBoxs[t],this.myBoxs[t+1]]:[this.myBoxs[t]]},shortName:function(e){return C.shortText(e)},showTime:function(e){return C.showTime(e)},pollWallet:function(){this.coinbase||g()},checkLogin:function(){this.coinbase?this.showCreat=!0:(this.$buefy.toast.open({message:this.$t("pleaseLogin"),type:"is-warning"}),g())},transfer:function(){var e=this;this.loading=!0,this.triggerContractCall("safeTransferFrom",[this.coinbase,this.transferAddr,this.transferBoxId],function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n&&(window.localStorage.setItem("transTx",n),e.watchHx(n)),e.showTransfer=!1;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},openBox:function(e){var t=this;this.loading=!0,this.triggerContractCall("openBox",[e],function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n&&(window.localStorage.setItem("transTx",n),t.watchHx(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},breakBox:function(e){var t=this;this.loading=!0,this.triggerContractCall("breakBox",[e],function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n&&(window.localStorage.setItem("transTx",n),t.watchHx(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},creat:function(){var e=this,t=this.web3.web3Instance.utils.toWei(this.ethNum,"ether");this.balance<t?this.$buefy.toast.open({message:this.$t("notEnough"),type:"is-warning"}):(this.loading=!0,this.triggerContractCall("creatBox",[this.newName,parseInt(1e6*this.wishPrice),parseInt(new Date(this.openTime).getTime()/1e3)],function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n&&(window.localStorage.setItem("transTx",n),e.watchHx(n)),e.showCreat=!1;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},watchHx:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.tx=window.localStorage.getItem("transTx")||"",this.tx&&(this.loading=!0,t=this,this.web3.web3Instance.eth.getTransaction(this.tx,function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}window.console.log("error",n),this.loading=!1,e.next=16;break;case 5:if(!a.blockNumber){e.next=12;break}t.loading=!1,t.getBoxsState(),window.localStorage.setItem("transTx",""),t.tx="",e.next=16;break;case 12:return e.next=14,C.sleep(5e3);case 14:window.console.log("kankan"),t.watchHx();case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getBoxsState:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.triggerContractCall("getEthPrice",[],function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.ethPrice=parseInt(n/1e4)/100;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.next=4,this.triggerContractCall("getMoonBoxsByOwner",[this.coinbase],function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=[],i=regeneratorRuntime.mark((function e(i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.triggerContractCall("moonBoxs",[Number(n[i])],function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.id=Number(n[i]),s.etherNumber=s.etherNumber/1e18,s.openTime=new Date(1e3*s.openTime),s.openPrice=s.openPrice/1e6,0!=s.etherNumber||t.isImtoken?(s.opendTime=0,a.push(s)):t.getEvent("OpenBox",s.id,function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.opendTime=t[0].returnValues.openTime,a.push(s);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})),s=0;case 3:if(!(s<n.length)){e.next=8;break}return e.delegateYield(i(s),"t0",5);case 5:s++,e.next=3;break;case 8:t.myBoxs=a;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),triggerContractCall:function(e,t,n){var a=new this.web3.web3Instance.eth.Contract(c,this.contractAddress),i="call",s=!1;if(c.forEach((function(t){t.name===e&&(i=/view/.test(t.stateMutability)?"call":"send",s=t.payable)})),"call"===i){var o;(o=a.methods)[e].apply(o,Object(r["a"])(t))[i]().then((function(e){e&&n&&n(e)}))}else{var u,l=this;(u=a.methods)[e].apply(u,Object(r["a"])(t))[i]({from:this.web3.coinbase,value:s?this.web3.web3Instance.utils.toWei(this.ethNum,"ether"):0,gasPrice:this.gasPrice},(function(e,t){e&&(window.console.log(e),l.loading=!1),n&&n(t)}))}},getEvent:function(e,t,n){var a=new this.web3.web3Instance.eth.Contract(c,this.contractAddress);a.getPastEvents(e,{filter:{boxId:t},fromBlock:0,toBlock:"latest"},(function(e,t){e&&window.console.log(e),n&&n(t)}))},setLanguage:function(e){this.$i18n.locale=e,window.localStorage.setItem("language",e)},watchCoinbase:function(){var e=this;setInterval((function(){e.coinbase&&g()}),1e3)}},beforeCreate:function(){this.$store.dispatch("registerWeb3");var e=window.localStorage.getItem("language")||"";if(e)this.$i18n.locale=e;else{var t=navigator.language||navigator.userLanguage;t=t.substr(0,2),this.$i18n.locale="zh"===t?"zhCHT":"en"}document.title=this.$t("MoonBox")+"-"+this.$t("hodl")},mounted:function(){this.$store.dispatch("getContractInstance"),this.watchCoinbase(),window.ethereum.isImToken&&(this.isImtoken=!0),this.isImtoken||this.watchHx()}},k=_,B=(n("7faf"),n("2877")),M=Object(B["a"])(k,i,s,!1,null,null,null),I=M.exports,$=n("a925"),E=n("d500"),O=n.n(E),P=n("4719"),R=n.n(P),H=n("289d");n("5abe");a["a"].use($["a"]),a["a"].config.productionTip=!1,a["a"].use(H["a"]);var N=new $["a"]({locale:"en",messages:{en:O.a,zhCHT:R.a}});new a["a"]({i18n:N,store:f,render:function(e){return e(I)}}).$mount("#app")},7884:function(e,t,n){e.exports=n.p+"static/img/free.a83a5932.jpg"},"7faf":function(e,t,n){"use strict";var a=n("8fba"),i=n.n(a);i.a},"8fba":function(e,t,n){},"950f":function(e,t,n){e.exports=n.p+"static/img/uniswap.77e45f24.svg"},"9d31":function(e,t,n){e.exports=n.p+"static/img/shovel.cc480824.svg"},aee9:function(e,t,n){e.exports=n.p+"static/img/ether_blue.3c2e38f7.svg"},c201:function(e,t,n){e.exports=n.p+"static/img/ether_orange.e1e15d26.svg"},c363:function(e,t,n){e.exports=n.p+"static/img/ether_purple.e7467531.svg"},cbeb:function(e,t,n){e.exports=n.p+"static/img/ether_normal.95bbdfae.svg"},d500:function(e,t){e.exports={language:"Language",english:"English",chinese:"中文",introduce1:"If you cannot long hodl your ETH, put it in a MoonBox! ",introduce2:"Set a target price or an end date to only get back your ETH",introduce3:"when either of the conditions is met. ",MoonBox:"MoonBox",hodl:"Hodl Your ETH Until It MOONS",price:"Current ETH Price",start:"Create",cancel:"Cancel",mybox:"My MoonChest",ethamount:"ETH Amount",openCondition:"Open Condition",openPrice:"ETH Price",openTime:"End Time",boxState:"Status",state1:"Cannot Open",state2:"Opened at ",state3:"",state4:"Opened",pleaseMeta:"This browser does not support the Explore fuction. Chrome and Metamask are recommended.",open:"Open",destory:"Break",or:"or Time ≥ ",unmet:"unmet",creatBox:"Create MoonBox",newDesc:"Title",wishPrice:"Target Price ($)",endTime:"Select End Time",inputNum:"ETH amount to deposit",transferTitle:"Transfer MoonBox",transferAddr:"Recipient Address",transfer:"Send",pleaseLogin:"Please log in to your MetaMask wallet",unlink:"Not logged in",notEnough:"Insufficient balance in wallet",transTx:"Transaction is pending",explain:{1:"Why would I need a MoonBox?",2:"Because MoonBox can help you long hodl your ETH. Let's say your target price was set at $1,000, you could only open the box and get back your ETH when the ETH_USDC price on Uniswap exceeds $1,000.",3:"You can partially set a sell price for your ETH to effectively aviod irrational actions caused by market sentiment.",4:"What else can I do after putting ETH in a MoonBox?",5:'Each MoonBox is a standard <b class="has-text-success" >ERC-721 token</b>. You can send it to your love one as a gift or pass it on to your family.',6:"In the future, MoonBox can also be used as collateral to take out a loan. DeFi is with great potential!",7:"What if I've set a wrong sell price?",8:"You can also set an end time for your MoonBox when creating. You will be able to get back your ETH when the timelock is expired even if the price has not yet met.",9:'The ETH price that MoonBox is reading is from <a class="has-text-warning" href="https://etherscan.io/address/0x97deC872013f6B5fB443861090ad931542878126" target="_blank" >Uniswap</a>, which is a truly decentralized oracle. In any case, if the contract is abandoned in the future, MoonBox will adopt a new oracle address.',10:"Is MoonBox 100% secured?",11:"MoonBox Contract",12:"Open-sourced, ERC-721 standard token, and verifiable by anyone. The MoonBox developer doesn't have any transferring authority. All the developer can do is replace the oracle address.",16:"It takes 1 week for the new oracle address to come into effect. Users can view the new oracle address and safelly get back their ETH by call the 'quit' api before the new oracle address is effective.",13:"Fee",14:"Create or break a MoonBox will cost you nothing but the gas fee!",15:"If you want to keep your MoonBox after getting back your ETH, you can choose to open the box instead of breaking it. By doing so, this ERC-721 box will still be yours. But there will be a 0.1% tip."},congratulation1:"Congratulations! You've reached your target price! ETH TO DA MOON!",congratulation2:"Congratulations! You've hit the end time!",taobao:"explore",find:{1:"This MoonBox contains ",2:"ETH. It is created by ",3:" at ",4:"and will only be opened when the ETH price is ≥ $",5:". It also reads："},findTitle:"Let's see if there is anything fun!",imgfrom:"Images revised from rocket.chat"}}});